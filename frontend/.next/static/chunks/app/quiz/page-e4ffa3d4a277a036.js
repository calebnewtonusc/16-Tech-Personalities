(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{73976:function(e,t,r){Promise.resolve().then(r.bind(r,8453))},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...h}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:s("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(a(e)),l),...c})});return r.displayName="".concat(e),r}},10407:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},8453:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(57437),a=r(2265),s=r(99376),o=r(93448);let i=[{value:0,label:"Strongly Disagree"},{value:1,label:"Disagree"},{value:2,label:"Neutral"},{value:3,label:"Agree"},{value:4,label:"Strongly Agree"}];function l(e){let{question:t,currentAnswer:r,onAnswer:a,questionNumber:s,totalQuestions:l}=e;return(0,n.jsxs)("div",{className:"w-full max-w-3xl mx-auto animate-fade-in",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("span",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:["Question ",s," of ",l]}),(0,n.jsxs)("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:[Math.round(s/l*100),"% Complete"]})]}),(0,n.jsx)("div",{className:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s/l*100,"%")}})})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:t.text}),(0,n.jsx)("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Select the option that best describes you"})]}),(0,n.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,n.jsx)("button",{onClick:()=>a(e.value),className:(0,o.cn)("w-full text-left px-6 py-4 rounded-xl border-2 transition-all duration-200","hover:border-primary-500 hover:bg-primary-50 dark:hover:bg-primary-950","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",r===e.value?"border-primary-500 bg-primary-50 dark:bg-primary-950 shadow-md":"border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800"),children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium text-secondary-900 dark:text-white",children:e.label}),(0,n.jsx)("div",{className:(0,o.cn)("w-5 h-5 rounded-full border-2 transition-all",r===e.value?"border-primary-500 bg-primary-500":"border-secondary-300 dark:border-secondary-600"),children:r===e.value&&(0,n.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})},e.value))})]})}var c=r(5526),d=r(52582),u=r(79205);let h=(0,u.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),m=(0,u.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=r(10407);let x="quiz_progress";function g(){var e;let t=(0,s.useRouter)(),{user:r}=(0,d.a)(),[i,u]=(0,a.useState)([]),[g,y]=(0,a.useState)(0),[b,p]=(0,a.useState)([]),[v,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!0),[k,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async function(){let e=(0,c.eI)(),{data:t,error:r}=await e.from("quiz_versions").select("*").eq("is_active",!0).order("version",{ascending:!1}).limit(1).single();if(r||!t){console.error("Error loading quiz:",r);return}u(t.questions.questions),w(t.id);let n=o.tO.get(x,null);n&&n.quizVersionId===t.id&&(p(n.answers),y(n.currentQuestion)),N(!1)})()},[]),(0,a.useEffect)(()=>{if(i.length>0&&b.length>0){let e={currentQuestion:g,answers:b,startedAt:new Date().toISOString(),quizVersionId:v};o.tO.set(x,e)}},[g,b,i,v]);let q=async()=>{if(b.length!==i.length){alert("Please answer all questions before submitting.");return}S(!0);try{let e=await fetch("/api/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:b,quiz_version_id:v,user_id:null==r?void 0:r.id})}),n=await e.json();if(n.error)throw Error(n.error);o.tO.remove(x),t.push("/results/".concat(n.result_id))}catch(e){console.error("Error submitting quiz:",e),alert("Failed to submit quiz. Please try again.")}finally{S(!1)}};if(j)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-white to-primary-50 dark:from-secondary-950 dark:to-secondary-900",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Loading quiz..."})]})});if(0===i.length)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-white to-primary-50 dark:from-secondary-950 dark:to-secondary-900",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{className:"text-secondary-600 dark:text-secondary-400",children:"No quiz available. Please try again later."})})});let A=i[g],E=null===(e=b.find(e=>e.questionId===A.id))||void 0===e?void 0:e.answer,C=(b.length/i.length*100).toFixed(0);return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-white to-primary-50 dark:from-secondary-950 dark:to-secondary-900 py-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"mb-8 text-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-secondary-900 dark:text-white mb-2",children:"Tech Personality Quiz"}),(0,n.jsx)("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Answer honestly - there are no right or wrong answers"})]}),(0,n.jsx)("div",{className:"bg-white dark:bg-secondary-800 rounded-2xl shadow-xl p-8 mb-6",children:(0,n.jsx)(l,{question:A,currentAnswer:E,onAnswer:e=>{let t=i[g],r=[...b],n=r.findIndex(e=>e.questionId===t.id);n>=0?r[n]={questionId:t.id,answer:e}:r.push({questionId:t.id,answer:e}),p(r),g<i.length-1&&setTimeout(()=>{y(g+1)},300)},questionNumber:g+1,totalQuestions:i.length})}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("button",{onClick:()=>{g>0&&y(g-1)},disabled:0===g,className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-secondary-800 text-secondary-700 dark:text-secondary-300 rounded-lg font-medium shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,n.jsx)(h,{className:"w-5 h-5"}),"Previous"]}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:g===i.length-1?(0,n.jsxs)("button",{onClick:q,disabled:b.length!==i.length||k,className:"flex items-center gap-2 px-8 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-bold shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,n.jsx)(m,{className:"w-5 h-5"}),k?"Submitting...":"Submit Quiz"]}):(0,n.jsxs)("button",{onClick:()=>{g<i.length-1&&y(g+1)},disabled:g>=i.length-1,className:"flex items-center gap-2 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-bold shadow-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",(0,n.jsx)(f.Z,{className:"w-5 h-5"})]})})]}),(0,n.jsxs)("div",{className:"mt-8 text-center text-sm text-secondary-600 dark:text-secondary-400",children:[(0,n.jsxs)("p",{children:[b.length," of ",i.length," questions answered (",C,"%)"]}),!r&&(0,n.jsx)("p",{className:"mt-2 text-xs text-secondary-500 dark:text-secondary-500",children:"Sign in to save your results and track your progress"})]})]})})}},52582:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return i}});var n=r(57437),a=r(2265),s=r(5526);let o=(0,a.createContext)({user:null,session:null,loading:!0,signOut:async()=>{}});function i(){let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}function l(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),h=(0,s.eI)();(0,a.useEffect)(()=>{h.auth.getSession().then(e=>{let{data:{session:t}}=e;c(t),i(null==t?void 0:t.user),u(!1)});let{data:{subscription:e}}=h.auth.onAuthStateChange((e,t)=>{c(t),i(null==t?void 0:t.user),u(!1)});return()=>e.unsubscribe()},[h]);let m=async()=>{await h.auth.signOut()};return(0,n.jsx)(o.Provider,{value:{user:r,session:l,loading:d,signOut:m},children:t})}},5526:function(e,t,r){"use strict";r.d(t,{eI:function(){return a}});var n=r(7903);function a(){return(0,n.AY)("https://qpjgeuonakbnhdkmkrhl.supabase.co","sb_publishable_ojj4hci2Q0M5Gcrd8Wt98Q_H5oFdzFR")}},93448:function(e,t,r){"use strict";r.d(t,{SY:function(){return s},cn:function(){return a},fZ:function(){return o},tO:function(){return l},vQ:function(){return i}});var n=r(61994);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.W)(t)}function s(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);for(let e of[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}]){let t=Math.floor(r/e.seconds);if(t>=1)return"".concat(t," ").concat(e.label).concat(t>1?"s":""," ago")}return"just now"}function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat("http://localhost:3000","/results/").concat(e).concat(t?"?public=true":"")}async function i(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy to clipboard:",e),!1}}let l={get(e,t){try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error('Error reading from localStorage key "'.concat(e,'":'),r),t}},set(e,t){try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(t){return console.error('Error writing to localStorage key "'.concat(e,'":'),t),!1}},remove(e){try{return window.localStorage.removeItem(e),!0}catch(t){return console.error('Error removing localStorage key "'.concat(e,'":'),t),!1}},clear(){try{return window.localStorage.clear(),!0}catch(e){return console.error("Error clearing localStorage:",e),!1}}}},61994:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}}),t.Z=n}},function(e){e.O(0,[903,971,117,744],function(){return e(e.s=73976)}),_N_E=e.O()}]);